@page "/home"
@layout UnauthenticatedLayout
@inject ILocalStorageService LocalStorage
@inject NavigationManager NavigationManager
@implements IAsyncDisposable

<PageTitle>MedizID - Welcome</PageTitle>

<div class="home-container">
    <Card Title="Welcome to MedizID">
        <GridRow>
            <GridCol Xs="24" Md="12">
                <h3 style="color: #1890ff; margin-bottom: 16px;">What is MedizID?</h3>
                <p>MedizID is an Indonesian Clinic Management and Electronic Medical Record System designed to
                    streamline healthcare operations and patient care.</p>
            </GridCol>
            <GridCol Xs="24" Md="12">
                <h3 style="color: #1890ff; margin-bottom: 16px;">Key Features</h3>
                <ul>
                    <li>Patient Management</li>
                    <li>Electronic Medical Records</li>
                    <li>Appointment Scheduling</li>
                    <li>Prescription Management</li>
                    <li>Department Management</li>
                </ul>
            </GridCol>
        </GridRow>

        <Divider />

        <div style="text-align: center;">
            <h3 style="margin-bottom: 24px;">Get Started</h3>
            <Space>
                <SpaceItem>
                    <Button Type="ButtonType.Primary" Size="ButtonSize.Large">
                        <NavLink href="/login" style="color: white; text-decoration: none;">Login</NavLink>
                    </Button>
                </SpaceItem>
                <SpaceItem>
                    <Button Size="ButtonSize.Large">
                        <NavLink href="/register" style="text-decoration: none;">Create Account</NavLink>
                    </Button>
                </SpaceItem>
            </Space>
        </div>
    </Card>

    <GridRow Gutter="(16,24)" Style="margin-top: 48px;">
        <GridCol Xs="24" Md="8">
            <Card Hoverable>
                <div style="text-align: center;">
                    <TablerSvgIcon Icon="TablerSvgIcon.BuildingHospital" Width="48" Height="48" Fill="#1890ff" />
                </div>
                <h4 style="text-align: center;">Clinic Management</h4>
                <p style="text-align: center;">Manage your clinic efficiently with our comprehensive system.</p>
            </Card>
        </GridCol>
        <GridCol Xs="24" Md="8">
            <Card Hoverable>
                <div style="text-align: center;">
                    <TablerSvgIcon Icon="TablerSvgIcon.FileText" Width="48" Height="48" Fill="#1890ff" />
                </div>
                <h4 style="text-align: center;">Electronic Records</h4>
                <p style="text-align: center;">Keep patient medical records safe and organized digitally.</p>
            </Card>
        </GridCol>
        <GridCol Xs="24" Md="8">
            <Card Hoverable>
                <div style="text-align: center;">
                    <TablerSvgIcon Icon="TablerSvgIcon.Calendar" Width="48" Height="48" Fill="#1890ff" />
                </div>
                <h4 style="text-align: center;">Appointments</h4>
                <p style="text-align: center;">Schedule and manage appointments with ease.</p>
            </Card>
        </GridCol>
    </GridRow>
</div>

<style>
    .home-container {
        display: flex;
        flex-direction: column;
        justify-content: center;
        align-items: center;
        min-height: calc(100vh - 64px - 69px);
        padding: 24px;
    }
</style>

@code {
    protected override async Task OnInitializedAsync()
    {
        try
        {
            var token = await LocalStorage.GetItemAsync<string>("authToken");
            if (!string.IsNullOrEmpty(token))
            {
                NavigationManager.NavigateTo("/dashboard");
            }
        }
        catch (Exception ex)
        {
            Console.WriteLine($"Error checking authentication: {ex.Message}");
        }
    }

    async ValueTask IAsyncDisposable.DisposeAsync()
    {
        await Task.CompletedTask;
    }
}